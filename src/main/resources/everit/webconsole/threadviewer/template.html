<!--

    This file is part of Everit - Felix Webconsole Thread Viewer.

    Everit - Felix Webconsole Thread Viewer is free software: you can redistribute it and/or modify
    it under the terms of the GNU Lesser General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Everit - Felix Webconsole Thread Viewer is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Lesser General Public License for more details.

    You should have received a copy of the GNU Lesser General Public License
    along with Everit - Felix Webconsole Thread Viewer.  If not, see <http://www.gnu.org/licenses/>.

-->
<script type="text/javascript">
	window.threadviewer = {
		"rootPath" : "${rootPath}" 
	};
</script>

<style>
.tablesorter {
	width: 100%
}

.tablesorter td.thread-id {
	padding-left: 10px
}

.tablesorter td.thread-name div.thread-name {
	cursor: pointer
}

table.stacktrace {
	margin: 15px 15px 15px 15px;	
}

table.stacktrace th {
	font-weight: bold; 
	padding: 3px 3px 3px 3px
}

table.stacktrace td {
	padding: 3px 3px 3px 3px;
	font-family: monospace;
}

#cnt-config {
	padding: 7px 7px 7px 7px;
}

#cnt-thread-state-filter {
	display: inline-block;
	float: right
}

#cnt-thread-state-filter span {
	padding-right: 20px
}

</style>


<script type="text/javascript" src="${rootPath}/underscore-min.js"></script>
<script type="text/javascript" src="${rootPath}/backbone.js"></script>
<script type="text/javascript" src="${rootPath}/backbone.queryparams.min.js"></script>
<script type="text/javascript" src="${rootPath}/backbone.queryparams-1.1-shim.js"></script>
<script type="text/javascript" src="${rootPath}/app/models.js"></script>
<script type="text/javascript" src="${rootPath}/app/views.js"></script>
<script type="text/javascript" src="${rootPath}/threadviewer.js"></script>

<p class="statline ui-state-highlight"></p>

<div id="cnt-config" class="ui-widget-header ui-corner-top">
	<button id="btn-toggle-all-selected" class="ui-state-default ui-corner-all">Open All</button>
	
	<div id="cnt-thread-state-filter"></div>
</div>

<div id="cnt-thread-list"></div>

<script type="text/template" id="tmpl-thread-row">
	<td class="thread-id"><%= thread.get("id") %></td>
	<td class="thread-name">
		<div class="thread-name"><%= thread.get("name") %></div>
	</td>
	<td><%= thread.get("state") %></td>
	<td>
		<ul class="icons ui-widgets">
			<li class="dynhover ui-state-default ui-corner-all" title="Interrupt">
				<span class="ui-icon ui-icon-stop"></span>
			</li>
		</ul>
	</td>
</script>

<script type="text/template" id="tmpl-thread-list">
	<table class="tablesorter">
		<thead>
			<tr>
				<th class="ui-widget-header header">Thread ID</th>
				<th class="ui-widget-header header">Thread Name</th>
				<th class="ui-widget-header header">State</th>
				<th class="ui-widget-header header">Actions</th>
			</tr>
		</thead>
		<tbody>
		</tbody>
	</table>
</script>

<script type="text/template" id="tmpl-stacktrace">
	<table class="stacktrace">
		<thead>
			<tr>
				<th></th>
			</tr>
		</thead>
		<tbody>
			<% _.each(stackTrace, function(entry) { %>
			<tr>
				<td><%= entry.description %></td>
			</tr>
			<% }); %>
		</tbody>
	</table>
</script>